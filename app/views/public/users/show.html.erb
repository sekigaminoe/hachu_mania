<h2>ユーザー詳細</h2>

<div class="container">
  <div class="row">
     <div>
        <%= image_tag @user.get_profile_image, size:'100x100' %>
     </div>
     <table>
        <th>ユーザー名</th>
        <td><%= @user.name %></td>

        <th>メールアドレス</th>
        <td>
          <% if @user.id == current_user.id %>
            <%= @user.email %>
          <% end %>
        </td>

        <th>自己紹介</th>
        <td><%= @user.introduction %></td>
     </table>
     <% if @user.id == current_user.id %>
        <%= link_to "編集", edit_user_path(@user), class: "btn btn-success" %>
     <% elsif current_user != @user %>
        <% if current_user.following?(user) %>
          <%= link_to "フォロー外す", user_relationships_path(user.id), method: :delete, class:"btn btn-info" %>
        <% else %>
          <%= link_to "フォローする", user_relationships_path(user.id), method: :post, class:"btn btn-success" %>
        <% end %>
    <% end %>
  </div>
  <div class="row">
    <div>
     <% @user.posts.each do |post| %>
       <p>投稿日:<%= post.updated_at.strftime("%Y-%m-%d %H:%M") %></p>
       <p>ジャンル:<%= post.genre.name %></p>
       <p>
         <%= link_to post_path(post.id) do %>
          <%= image_tag post.get_post_image(300, 300) %>
         <% end %>
       </p>
       <p><%= link_to "詳細を見る", post_path(post) %></p>
       <% if @user.id == current_user.id %>
         <p><%= link_to "編集", edit_post_path(post) %></p>
         <p><%= link_to "削除", post_path(post), method: :delete, data: {confirm: "削除しますか？"} %></p>
       <% end %>
     <% end %>
    </div>
  </div>
</div>
